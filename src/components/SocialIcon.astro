---
import { Icon } from "astro-icon/components";

interface Props {
  name: string;
  friendlyName: string;
  link: string;
  text?: string;
  label?: string;
  'aria-label'?: string;
  'data-tooltip'?: string;
}

const { name, friendlyName, link, text, label, ...rest } = Astro.props as Props;
const isExternal = link.startsWith('http') || link.startsWith('mailto:');
const iconName = name === 'upwork' ? 'simple-icons:upwork' : name;
---

<li class="social__item" data-tooltip={rest['data-tooltip']}>
  <a
    href={link}
    class="social__link"
    {...(isExternal && { 
      target: "_blank",
      rel: "noopener noreferrer",
      'aria-label': `${label || friendlyName} (s'ouvre dans un nouvel onglet)`
    })}
    {...(!isExternal && { 'aria-label': label || friendlyName })}
  >
    <Icon
      width="1.2em"
      height="1.2em"
      class="social__logo"
      name={iconName}
      aria-hidden="true"
      focusable="false"
    />
    {text && <span class="social__text">{text}</span>}
  </a>
</li>

<style>
  .social__link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
    text-decoration: none;
    color: inherit;
  }

  .social__link:hover,
  .social__link:focus-visible {
    background-color: var(--selection);
    transform: translateY(-2px);
    outline: 2px solid var(--border);
    outline-offset: 2px;
  }

  .social__logo {
    width: 1.2em;
    height: 1.2em;
    flex-shrink: 0;
    transition: transform 0.2s ease;
  }

  .social__link:hover .social__logo {
    transform: scale(1.1);
  }

  .social__text {
    font-size: 0.95em;
    font-weight: 500;
    white-space: nowrap;
  }

  @media (prefers-reduced-motion: reduce) {
    .social__link,
    .social__logo {
      transition: none;
    }
  }
</style>
